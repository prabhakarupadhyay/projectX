<!DOCTYPE html>
<html>

<head>
       <!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-114307696-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <link rel="shortcut icon" type="image/png" href="/websiteAssets/favicon.png">
    <title>Mods Fusion</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./assets/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="./assets/css/3.css">
    <link rel="stylesheet" type="text/css" href="./assets/css/navbar+footer.css">
    <link rel="stylesheet" type="text/css" href="./assets/css/notif.css">
    <link rel="stylesheet" type="text/css" href="./assets/css/userPanel.css">
    <link href="https://fonts.googleapis.com/css?family=Merienda|Yellowtail|Rajdhani" rel="stylesheet"> </head>

<body>
    
        <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&autoLogAppEvents=1&version=v2.12&appId=1945744309045122';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
    <!-- Top NavBar -->
    <nav class="navbar navbar-toggleable-md">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
        <div class="container">
            <div class="col-4">
                <a class="navbar-brand" href="http://modsfusion.com"><img src="./assets/images/modsfuseLogo.png"></a>
            </div>
            <div class="col-4"> </div>
            <div class="col-4 nav-right text-right" id="UserView">
                <a href="/auth/google"><img height="50px" src="./assets/images/gsignin.png"></a>
            </div>
        </div>
    </nav>
    <div class="container main-content">
        <h1> Shops</h1>
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8 col-12">
                <div class="row" id="dynamicAlloc">
                    <div class=" col-12 col-md-6" id="DynamicTag">
                        <div class="card" style="width: 20rem;">
                            <div class="card-header" id="Name"> Shop Name </div>
                            <a id="Dynamic_Url" href=""><img class="card-img-top" id="Images" src="./assets/shop1.jpg" alt="Could Not Load"></a><strong>Distance: </strong>
                            <p id = "Distance" style = "margin: 0px;"> unknown </p>
                            <button type="button" class="btn preview" data-toggle="modal" data-target="#myModal" onclick="previewButton(this)"><i class="fa fa-eye" aria-hidden="true"></i> Shop Preview</button>
                        </div>
                        <div id="modalData" hidden="true"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>
    <!-- Shop Preview -->
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="m-title" id="Name">Shop Name</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12 col-md-6"> <img class="mod-image img-fluid" src="./assets/shop1.jpg" id="Images"> </div>
                            <div class="col-md-6 col-12">
                                <p class="highlight"> Description: </p>
                                <p id="description">Short description about the shop.................................. </p>
                                <p class="highlight">Contact: </p>
                                <div class="no-space">
                                    <p>Email<p id="Email"> abc@xyx.com</p></p>
                                    <p>Phone No<p id="Numbers"> 8989898989</p></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a id="Dynamic_Url"><button type="button" class="btn">Go to Shop</button></a>
                </div>
            </div>
        </div>
    </div>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4 col-sm-6 footerleft ">
                    <div class="logofooter"><img src="./assets/images/modsfuseLogo.png" style="height: 65px; width: 200px;"></div>
                    <p>Contact Us via Call/WhatsApp for any modification demands or queries - </p>
                    <p><i class="fa fa-phone"></i> <span>Phone/whatsapp : </span><span id="companyNumber">not available</span></p>
                    <p><i class="fa fa-envelope"></i> E-mail : 1developer.mail@gmail.com</p>
                </div>
                <div class="col-md-2 col-sm-6 paddingtop-bottom">
                    <h6 class="heading7">TWITTER FEED</h6>
                    <ul class="footer-ul">
                        <li><a class="twitter-timeline" data-height="200" data-theme="light" href="https://twitter.com/mods_fusion?ref_src=twsrc%5Etfw">Tweets by mods_fusion</a> </li>
                    </ul>
                </div>
                <div class="col-md-3 col-sm-6 paddingtop-bottom">
                    <h6 class="heading7">LATEST FB POST</h6>
                    <div class="post">
                        <div class="fb-page" data-href="https://www.facebook.com/modsfusion/" data-tabs="timeline" data-height="200" data-small-header="true" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/modsfusion/" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/modsfusion/">Mods Fusion</a></blockquote></div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 paddingtop-bottom">
                    <h6 class="heading7">SOCIAL MEDIA</h6>
                    <blockquote class="blockquote">
                        <blockquote cite="https://www.facebook.com/modsfusion"><a href="https://www.facebook.com/modsfusion/" style="color:#57aee3">Facebook</a></blockquote>
                        <blockquote cite="https://twitter.com/mods_fusion"><a href="https://twitter.com/mods_fusion" style="color:#57aee3">Twitter</a></blockquote>
                        <p style="font-size:16px"><a href="https://www.facebook.com/onedeveloper.1" style="color:#c71ce0;">Follow the journey of an entrepreneur</a></p>
                    </blockquote>
                </div>
            </div>
        </div>
    </footer>
    <!--Footer2-->
    <div class="copyright">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p>Â© 2017-2018 Mods Fusion</p>
                </div>
                                
                <div class="col-md-6">
                    <ul class="bottom_ul">
                        <li><a href="/privacy">privacy</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- USER PANEL -->
    <div class="modal fade" id="UserPanel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content user">
                <div class="modal-header user-head">
                    <div style="text-align: center; width: 100%">
                        <h5 class="m-title">USER PANEL</h5></div>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
                </div>
                <div class="modal-body user-body">
                    <form class="container-fluid userform" id="formPanel">
                        <div class="form-group row">
                            <label for="name" class="col-2 userlabel">Name: *</label>
                            <div class="col-10">
                                <input type="text" class="form-control userinput" id="Name" placeholder="" name="impField_Name" maxlength="90"> </div>
                        </div>
                        <div class="form-group row">
                            <label for="state" class="col-2 userlabel">State: </label>
                            <div class="col-2">
                                <input type="text" class="form-control userinput" id="State" placeholder="" maxlength="50"> </div>
                            <label for="city" class="col-2 userlabel">City: </label>
                            <div class="col-2">
                                <input type="text" class="form-control userinput" id="City" placeholder="" maxlength="100"> </div>
                            <label for="state" class="col-2 userlabel">Zip-Code: </label>
                            <div class="col-2">
                                <input type="number" class="form-control userinput" id="Zipcode" placeholder="" maxlength="20"> </div>
                        </div>
                        <div class="form-group row">
                            <label for="address" class="col-2 userlabel">Address: </label>
                            <div class="col-10">
                                <textarea class="form-control userinput" id="Address" rows="2" maxlength="240"></textarea>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="number" class="col-2 userlabel">Number: *</label>
                            <div class="col-10">
                                <input type="number" class="form-control userinput" id="Number" name="impField_Number" maxlength="13"> </div>
                        </div>
                        <div style="text-align: center">
                            <button type="submit" class="btn" id="submitPanel">Save Changes</button>
                        </div>
                        <p style="font-size : 11px;">* fields are imp for booking a call/whatsAppMsg</p>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--USER PANEL ENDS-->
    <!-- NOTIFICATION -->
    <div class="modal fade" id="Notification" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content notif">
                <div class="modal-header notif-head">
                    <h5 class="m-title">NOTIFICATIONS</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body notif-body">
                    <div class="container noty-holder">
                        <div class="alert alert-read alert-dismissible fade show" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> <strong>Holy guacamole!</strong>No Notification </div>
                    </div>
                </div>
                <div class="modal-footer notif-foot">
                    <button type="button" class="btn" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- NOTIFICATION ENDS-->
    <!-- bottom nav -->
    <div class="navbottom-content container"> </div>
    <nav class="navbar navbar-toggleable-md fixed-bottom container navbottom">
        <div class="col-4"> 
            <a id="userTray" data-toggle="modal" data-target="#UserPanel" style="visibility:hidden;"><i class="fa fa-user" aria-hidden="true"></i></a>
        <a data-toggle="modal" data-target="#Notification"><i class="fa fa-bell" aria-hidden="true"></i></a>
        </div>
        <div class="col-4">
            <ul class="nav nav-pills nav-stacked col-md-1">
                <li class="nav-item active"> <a class="nav-link" href="http://modsfusion.com/">HOME</a> </li>
                <li class="nav-item"> <a class="nav-link" href="#">SHOPS</a> </li>
                <li class="nav-item"> <a class="nav-link" href="/locationSearch">SEARCH</a> </li>
                <li class="nav-item"> <a class="nav-link" href="/about">ABOUT</a> </li>
            </ul>
        </div>
    </nav>
    <!-- bottom nav -->
    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
    <!--firebase-->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <!--tether-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <!--bootstrap-->
    <script src = "assets/js/notif.js"></script>
    <script id="modifiable">
//        var Ser_comLoadDat = [{
//                        "Name": "Auto Marg"
//                        , "Dynamic_Url": "rkxVUpY5rZ"
//                        , "Images": "./assets/shop1.jpg,https://storage.googleapis.com/titanium-flash-171510.appspot.com/SHOPS/Auto Marg/shop_1/IMAGE_audi Q7.PNG,https://storage.googleapis.com/titanium-flash-171510.appspot.com/SHOPS/Auto Marg/shop_1/IMAGE_Xlogo.png"
//                        ,description:"auto marg description..........."
//                        ,Email:"autoMarg@gmail.com"
//                        ,Number:"8080886868"
//        }, {
//                        "Name": "Vasant Marg"
//                        , "Dynamic_Url": "rkxVUpY5rZ"
//                        , "Images": "./assets/shop1.jpg,https://storage.googleapis.com/titanium-flash-171510.appspot.com/SHOPS/Auto Marg/shop_1/IMAGE_audi Q7.PNG,https://storage.googleapis.com/titanium- flash-171510.appspot.com/SHOPS/Auto Marg/shop_1/IMAGE_Xlogo.png"
//                        ,description:"Vasant marg description..........."
//                        ,Email:"VasantMarg@gmail.com"
//                        ,Number:"8090909886868"                        
//        }, {
//                        "Name": "Marg Marg"
//                        , "Dynamic_Url": "rkxVUpY5rZ"
//                        , "Images": "./assets/shop1.jpg,https://storage.googleapis.com/titanium-flash-171510.appspot.com/SHOPS/Auto Marg/shop_1/IMAGE_audi Q7.PNG,https://storage.googleapis.com/titanium- flash-171510.appspot.com/SHOPS/Auto Marg/shop_1/IMAGE_Xlogo.png"
//                        ,description:"Marg marg description..........."
//                        ,Email:"MargMarg@gmail.com"
//                        ,Number:"866609886868"               
//            
//        }, {
//                        "Name": "Raghu Marg"
//                        , "Dynamic_Url": "rkxVUpY5rZ"
//                        , "Images": "./assets/shop1.jpg,https://storage.googleapis.com/titanium-flash-171510.appspot.com/SHOPS/Auto Marg/shop_1/IMAGE_audi Q7.PNG,https://storage.googleapis.com/titanium-flash-171510.appspot.com/SHOPS/Auto Marg/shop_1/IMAGE_Xlogo.png"
//                        ,description:"Raghu marg description..........."
//                        ,Email:"RaghuMarg@gmail.com"
//                        ,Number:"8666000000868"              
//        }
//
//        ];
        //Shop Allocation
        var dynamicAlloc = document.getElementById('dynamicAlloc');
        var dynamicTag = document.getElementById('DynamicTag');
        var myModal = document.getElementById('myModal');
     var userTray = document.getElementById('userTray');
     var submitPanel = document.getElementById('submitPanel');
     var formPanel = document.getElementById('formPanel');        
        
        
        //check if common variable is present or not
        if (typeof Ser_comLoadDat != 'undefined') {
            if(Ser_comLoadDat != 'Nothing to show........Please add some shops'){
                executeComUserFunc();
            }
        }
            
        userTray.onclick = function(){loadUserData();}
        //DYNAMIC SHOP ARRANGEMENT
        function executeComUserFunc() {
            var countObj = Ser_comLoadDat.length;
            for (let i in Ser_comLoadDat) {
                var currentObj = Ser_comLoadDat[i];
                var objectKeys = Object.keys(currentObj);
                for (let j in objectKeys) {
                    var currentKey = objectKeys[j];
                    var currentTag = dynamicTag.querySelector('#' + currentKey);
                    if(currentTag != null){
                        
                        var modalStore = dynamicTag.querySelector('#modalData');
                        modalStore.innerHTML += '"'+currentKey+'":"'+currentObj[currentKey]+'",';           
                        
                        feedTags(currentTag, currentObj[currentKey], function (newCurrentTag) {});
            
                    }else{
                        //resolve for Modal data(shop view)
                        var modalStore = dynamicTag.querySelector('#modalData');
                        modalStore.innerHTML += '"'+currentKey+'":"'+currentObj[currentKey]+'",';
                    }
                }
                
                if (i == 0) {
                    dynamicTag = dynamicTag.cloneNode(true);
                }
                else {
                    dynamicAlloc.appendChild(dynamicTag);
                    dynamicTag = dynamicTag.cloneNode(true);
                }
            }
        }
        
        
        
        
        
        
        function previewButton(e){
            
            //find parent tag from shop preview button
            var myParent = e.parentNode;
            while(myParent.id != 'DynamicTag'){
                myParent = myParent.parentNode;
            }
            //fetch value from the hidden element containing modal data 
            var modalDat = myParent.querySelector('#modalData').innerHTML;
            var newModalDat = modalDat.substring(0, modalDat.length-1);
            var objStr = '{'+ newModalDat+'}';
            console.log(objStr);
            var datJsonObj = JSON.parse(objStr);
            
            var breakKeys = Object.keys(datJsonObj);
            for(let i in breakKeys){
                
                var currentTag = myModal.querySelector('#' + breakKeys[i]);
                if(currentTag != null){
                    feedTags(currentTag, datJsonObj[breakKeys[i]], function (newCurrentTag) {});
                }
            }
        }

        
        
        function feedTags(currentTag, tagValue, callback) {
            if (currentTag.tagName == 'IMG') {
                var tagValueArr = tagValue.split(',');
                if (Array.isArray(tagValueArr)) {
                    //currently using only first url of shop images
                    currentTag.setAttribute('src', tagValueArr[0]);
                    callback(currentTag);
                    return;
                }
                currentTag.setAttribute('src', tagValue);
                callback(currentTag);
            }
            else if (currentTag.tagName == 'A') {
                var urlSplit = window.location.href.split('/');
                var createWebUrl = document.location.origin+'/'+'dynamicShop'+'/'+urlSplit[urlSplit.length-1]+'/'+ tagValue;
                currentTag.setAttribute('href', createWebUrl);
                callback(currentTag);
            }
            else if (currentTag.tagName == 'DIV' || currentTag.tagName == 'P' || currentTag.tagName == 'H5') {
                if(currentTag.id == 'Distance'){
                    currentTag.innerHTML = tagValue + " kms";
                }else{
                    currentTag.innerHTML = tagValue;
                    callback(currentTag);
                }
            }
            else {
                callback("tag not found.");
            }
        }
        
               //***For Testing*** 
      //  var Ser_logUserDat = [{"User_Email_Name": "Science Maniac","User_Picture":"./assets/images/user.jpg"}];
        //var Ser_logUserDat = [{"Shop_User_Email_Name": "Shop Owner","Shop_User_Picture":"./assets/images/user.jpg"}];
        if (typeof Ser_logUserDat != 'undefined') {
            executeLogUserFunc();
            loadUserData();
        }
        
        
        function loadUserData() {
            var userview = document.getElementById('UserView');
                
                var username = Ser_logUserDat[0]["User_Email_Name"];
                var userpic = Ser_logUserDat[0]["User_Picture"];
                var shopname = Ser_logUserDat[0]["Shop_User_Email_Name"];
                var shoppic = Ser_logUserDat[0]["Shop_User_Picture"];
                userview.innerHTML = '<img class = "userpic" src = ' + (userpic || shoppic) + '>';
                userview.innerHTML += '<h1 class = "username">' + (username || shopname) +'</h1>'; 
                userTray.style.visibility = "visible";
            
            if(Ser_logUserDat[1] != undefined){
                
                for(var i=0;i < formPanel.elements.length; i++){
            
                    if(formPanel.elements[i].tagName == 'INPUT' || formPanel.elements[i].tagName == 'TEXTAREA'){
                 
                        if(formPanel.elements[i].type != 'button'){
                
                            for(var j in Ser_logUserDat[1]){
                        
                                if(j == formPanel.elements[i].id){
                            
                                    if(j == 'Number' || j == 'Zipcode'){
                                       formPanel.elements[i].value = Ser_logUserDat[1][j]; 
                                    }else{
                                        formPanel.elements[i].value = Ser_logUserDat[1][j];  
                                    }
                                    
                                }  
                            }   
                        }
                    }                
                } 
            }        
        }

        function executeLogUserFunc() {
            var getLoginKeys = Object.keys(Ser_logUserDat[0]);
            var splitLoginKeys = getLoginKeys[0].split('_')[0];
            //pass this to authorize the firebase on user login(after which it is deleted)      
            var idTokenName = splitLoginKeys + "_IdToken";
            //pass this value with every socket resquest to the server       
            var accessToken = splitLoginKeys + "_AccessToken";
            var callOnce = true;
            var FireBaseUser = null;
            //user creds for firebase 
            var configFirebase = {
                apiKey: "AIzaSyCB3xwPLgUI6O4AQQQYxW8PaZWsAcrXRq0"
                , authDomain: "titanium-flash-171510.firebaseapp.com"
                , databaseURL: "https://titanium-flash-171510.firebaseio.com"
                , projectId: "titanium-flash-171510"
                , storageBucket: "titanium-flash-171510.appspot.com"
                , messagingSenderId: "284593292198"
                , "gcm_sender_id": "103953800507"
            };
            firebase.initializeApp(configFirebase);
            var unsubscribe = firebase.auth().onAuthStateChanged(function (firebaseUser) {
                unsubscribe();
                //check if user is logged in to firebase or not
                if (isUserEqual(firebaseUser) == false || Ser_logUserDat[0][idTokenName] != null) {
                    var credential = firebase.auth.GoogleAuthProvider.credential(Ser_logUserDat[0][idTokenName]);
                    // Sign in with credential from the Google user.
                    firebase.auth().signInWithCredential(credential).then(function (result) {
                        //user successfully logged in to firebase
                        //listen to change in socket events
                        listeToSockets(result);
                    }).catch(function (error) {
                        //prompt user to login again
                    });
                }
                else {
                    //user already signed in
                    listeToSockets(firebaseUser);
                }
            });

            function listeToSockets(firebaseUser) {
                FireBaseUser = firebaseUser.uid;
                //listen to changes at specific socket id
                firebase.database().ref('Channels/Sockets/' + firebaseUser.uid).on('value', function (socketResponse) {
                    //delete id_token in database once the user is logged in
                    if (Ser_logUserDat[0][idTokenName] != null && callOnce == true) {
                        callOnce = false;
                        //call once the user is authorized
                        delIdToken(firebaseUser, accessToken, Ser_logUserDat[0][accessToken], idTokenName);
                    }
                    //get the results/values/response/data of the socket data request
                    console.log(socketResponse.val());
                    //remove the data from the firebase db to free the space once the data is recieved
                    firebase.database().ref('Channels/Sockets/' + firebaseUser.uid).remove();
                });
            }

            function delIdToken(firebaseUser, keyName, keyValue, keyNameToDelete) {
                var makeObj = {
                        Event_Name: "deleteTokValue"
                        , Array_info: [keyName, keyValue, keyNameToDelete]
                    }
                    //pass data to server at specific socket id(different for every user) to delete id_token(not to be confused with accessToken)
                firebase.database().ref('Channels/Sockets/' + firebaseUser.uid).set(makeObj);
            }

            function isUserEqual(firebaseUser) {
                if (firebaseUser) {
                    var providerData = firebaseUser.providerData;
                    console.log(firebase.auth.GoogleAuthProvider.PROVIDER_ID);
                    for (var i = 0; i < providerData.length; i++) {
                        console.log(providerData[i].providerId);
                        if (providerData[i].providerId === firebase.auth.GoogleAuthProvider.PROVIDER_ID) {
                            return true;
                        }
                    }
                }
                return false;
            }

            
                       var userInfoObj = {
                        Name: ''
                        , State: ''
                        , City: ''
                        , Zipcode: ''
                        , Address: ''
                        , Number: ''
                    }            
          

                 submitPanel.onclick = function(e){
                var submitButton = e.target.parentNode;
                var thisForm = submitButton.parentNode;
                for(var i=0;i < thisForm.elements.length; i++){
            
                    if(thisForm.elements[i].tagName == 'INPUT' || thisForm.elements[i].tagName == 'TEXTAREA'){
                 
                        if(thisForm.elements[i].type != 'button'){
                
                            for(var j in userInfoObj){
                        
                                if(j == thisForm.elements[i].id){
                            
                                    if(j == 'Number' || j == 'Zipcode'){
                                        userInfoObj[j] = thisForm.elements[i].value.toString();
                                    }else{
                                        userInfoObj[j] = thisForm.elements[i].value;   
                                    }
                                    
                                }  
                            }   
                        }
                    }                
                } 
                          
                userInfoObj[accessToken] = Ser_logUserDat[0][accessToken];
                if (splitLoginKeys == 'User') {
                    userInfoObj.Event_Name = "UserData";
                }
                else {
                    userInfoObj.Event_Name = "ShopOwnerData";
                }
                firebase.database().ref('Channels/Sockets/' + FireBaseUser).set(userInfoObj);
                     submitButton.children[0].innerHTML = "Saved";
                     submitButton.children[0].disabled = true;
                return false;
            }             
            
            
        }
    </script>
</body>

</html>